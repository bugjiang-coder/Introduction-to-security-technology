# DES文档

## 1.标准输入

所有的输入 输出 均为64个的char数组，为了节省空间，用int32位 处理0和1 是没有必要的 





## 2.加密实现

完全按照课本上的实现





## 3.代码优化部分

将对DES.c进行优化，变成一个可以提供64位加密的lib，



现在发现一个问题，如果每次加密64位就要重新计算一遍密码，要不生成密码部分同样写入lib之中将其分离



## 4.遇到的惊天bug及处理方案

下面的这两个函数直接浪费我3个小时的时间，一直在找哪里出了问题，一直找不到，最后定位到这里，要不是之前我就遇到，但是没有处理，我可能要在这里卡死一辈子了。



下面的代码乍一看没有问题，这个注释看似确实可以注释调，并没有必要留下来，但是一连续调用这个函数，你马上就发现出问题了。根本原因就在for循环中的`+=`，如果`ch[8]`连续使用，那么每次它都是在上一次非零的结果上`+=`，结果自然不对。



所以写函数的时候一定要把传入参数做好判断，清空调在把值放入

```c

void Bit64ToChar8(char bit[64], char ch[8])
{
	int i, j;
	//memset(ch, 0, 8);  这行非常重要
	for (i = 0; i < 8; ++i)
		for (j = 0; j < 8; ++j)
			*(ch + i) += *(bit + (i << 3) + j) << j;

	return;
}
```

